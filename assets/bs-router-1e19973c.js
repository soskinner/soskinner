define("@widget/RSS/c/bs-router-1e19973c.js",["exports","~/c/bs-editable-field-tags"],(function(e,t){"use strict";const{PUBLISH:o}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes,s=()=>"undefined"==typeof window;class r extends(global.React||guac.react).Component{static get propTypes(){return{env:(global.PropTypes||guac["prop-types"]).string,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,pageId:(global.PropTypes||guac["prop-types"]).string,locale:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).oneOf(Object.values((global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes)).isRequired,viewDevice:(global.PropTypes||guac["prop-types"]).oneOf(Object.values((global.Core||guac["@wsb/guac-widget-core"]).constants.renderDevices)).isRequired,id:(global.PropTypes||guac["prop-types"]).string,rssFeed:(global.PropTypes||guac["prop-types"]).string,categoriesFilter:(global.PropTypes||guac["prop-types"]).array,blogType:(global.PropTypes||guac["prop-types"]).string.isRequired,layout:(global.PropTypes||guac["prop-types"]).string.isRequired,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,backgroundImage:(global.PropTypes||guac["prop-types"]).string,visitorMode:(global.PropTypes||guac["prop-types"]).bool.isRequired,detachedMode:(global.PropTypes||guac["prop-types"]).bool.isRequired,currentPageRoute:(global.PropTypes||guac["prop-types"]).string}}constructor(){super(...arguments),this.state={},this.filterCategory=this.filterCategory.bind(this),this.navigate=this.navigate.bind(this),this.updateStateFromLocation=this.updateStateFromLocation.bind(this),this.scrollIntoView=this.scrollIntoView.bind(this),this.waitForComments=this.waitForComments.bind(this)}scrollIntoView(e){const{id:o}=this.props;this.shouldScrollIntoView(e)&&"undefined"!=typeof document&&(t.a(window)&&t.s(window._BLOG_DATA)?this.waitForComments():document.getElementById(o).scrollIntoView())}shouldScrollIntoView(e){const{renderMode:s}=this.props;if(s!==o)return!1;const{slug:r,selectedCategory:i}=e||this.state,n=t.g();return!!(r||i||n||t.a(window))}waitForComments(){const e=document.getElementById("disqus_thread");e?e.scrollIntoView():requestAnimationFrame(this.waitForComments)}componentDidMount(){const e={slug:this.getSlug(),selectedCategory:this.getSelectedCategory()};e.slug?this.setState({...e,previousScrollPosition:window.scrollY}):e.selectedCategory&&this.setState(e),this.scrollIntoView(e),window.addEventListener("popstate",this.updateStateFromLocation),this.props.renderMode!==o&&window.addEventListener("blog-navigate",this.updateStateFromLocation)}componentWillUnmount(){window.removeEventListener("popstate",this.updateStateFromLocation),window.removeEventListener("blog-navigate",this.updateStateFromLocation)}componentDidUpdate(e){this.props.renderMode!==e.renderMode&&this.updateStateFromLocation()}shouldComponentUpdate(e,o){return this.props.blogType!==e.blogType||e.blogType!==t.I||"EDIT"===e.renderMode||!t.e(this.state,o,["slug"])||!t.i(this.state,o,["selectedCategory"])}updateStateFromLocation(){this.setState({slug:this.getSlug(),selectedCategory:this.getSelectedCategory()})}getSlug(){if(!s())return this.props.renderMode===o&&t.p()?t.b():t.c()}getSelectedCategory(){if(!s())return t.d()}generateNavigateEvent(){const e="blog-navigate";if(window.Event.prototype.initEvent){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}return new window.Event(e)}goToUrl(e){e&&!s()&&e!==window.location.href&&(this.props.renderMode===o?window.location.assign(e):(window.history.pushState({},null,e),window.dispatchEvent(this.generateNavigateEvent())))}filterCategory(e){const o=this.getSelectedCategory();let s=t.j(e);e||(s=t.k(s)),o===e&&null!==e||this.goToUrl(s)}navigate(e){if(s())return;const{renderMode:r,currentPageRoute:i}=this.props;let n;n=r===o?e?t.l(e,i):t.k(t.m()):t.n(e),this.goToUrl(n)}render(){return(global.React||guac.react).createElement(this.RssFeeds,t._({slug:this.state.slug||"",navigate:this.navigate,imgParams:this.imgParams,filterCategory:this.filterCategory,selectedCategory:this.state.selectedCategory||"",onFeedLoaded:this.scrollIntoView},this.props))}}e.R=r})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-router-1e19973c.js.map
